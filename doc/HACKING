# Hacking on HALT

First, make the virtual disk.

    ./script/make_disk

Mount this disk in loop so that you can write to a plain folder to write to the disk.

    ./script/mount

Then, build and deploy the uefi bootloader and HALT.

    ./script/all

Use qemu to  boot it all up:

    ./script/qemu_bios  # You only need to run it once
    ./script/qemu

Happy hacking!

## Qemu

In order to run the image with Qemu, use http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=OVMF. Rename OVMF.fd to bios.bin, and CirrusLogic5446.rom to vgabios-cirrus.bin. Put them both in qemu-bios.

Run with

    make qemu

## GCC

There is a gotcha. You need gcc >= 4.7, otherwise the `-DGNU_EFI_USE_MS_ABI` flag won't work and the calls to BootServices will end up with errors.
