# Hacking on HALT

You can use the makefile to set up the base images needed for emulation.

    make vboximage

This creates a .img and a .vdi. If the .img exists, the .vdi will be recreated. To mount it up as a loopback device, run

    make mount

This mounts up the .img as loop in PROJECT_ROOT/mnt, meaning writing to that dir updates the .img directly. This makes it easy to deploy new builds of the kernel to the disk.

Create a Virtualbox VM that has uefi enabled and boot from the .vdi disk created by the makefile.

## Virtualbox

I wasn't able to run the image with Virtualbox 4.1.2 (Ubuntu 12.04), but it should be possible with VirtualBox 4.3.

## Qemu

In order to run the image with Qemu, download http://people.canonical.com/~jk/ovmf/ to folder qemu-bios.

Alternatively, use http://sourceforge.net/apps/mediawiki/tianocore/index.php?title=OVMF. Rename OVMF.fd to bios.bin, and CirrusLogic5446.rom to vgabios-cirrus.bin. Put them both in qemu-bios.